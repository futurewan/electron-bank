# Proposal: 登录系统

## 1. 背景 (Background)

AI 对账助手需要一个完整的用户认证系统，以便：
- 区分不同用户的数据
- 保护用户隐私和数据安全
- 支持多账户管理

参考百度网盘桌面端的 UI 设计风格，实现一个简洁、现代的登录界面和用户系统。

## 2. 目标 (Goals)

### 2.1 核心功能
- ✅ 用户登录页面（账号密码登录）
- ✅ 用户注册页面
- ✅ 登录状态持久化（记住登录）
- ✅ 登录后跳转到主页
- ✅ 顶部用户信息展示（参考百度网盘风格）
- ✅ 退出登录功能

### 2.2 UI/UX 设计（参考百度网盘风格）
- ✅ 登录页面：居中卡片式布局，简洁大气
- ✅ 顶部导航：右侧显示用户头像和用户名（如参考图的 "Hi >" 风格）
- ✅ 侧边栏底部：显示用户信息和设置入口
- ✅ 遵循 S19 Aesthetic Harmony 设计系统

## 3. 非目标 (Non-Goals)

- ❌ 本阶段不实现第三方登录（微信、QQ 等）
- ❌ 本阶段不实现手机验证码登录
- ❌ 本阶段不实现密码找回功能
- ❌ 本阶段不接入真实后端 API（使用本地存储模拟）

## 4. 技术方案 (Technical Approach)

### 4.1 数据存储

使用 `electron-store` 存储用户信息（本地模拟）：

```typescript
interface User {
  id: string
  username: string
  password: string // 实际应加密存储
  avatar?: string
  createdAt: string
}

interface AuthState {
  currentUser: User | null
  isLoggedIn: boolean
  rememberedUsername?: string
}
```

### 4.2 页面结构

```
src/pages/
├── Auth/
│   ├── Login/
│   │   ├── index.tsx        # 登录页面
│   │   └── Login.module.css
│   └── Register/
│       ├── index.tsx        # 注册页面
│       └── Register.module.css
└── Home/                     # 已有首页
```

### 4.3 状态管理

使用 Zustand 管理认证状态：

```typescript
// src/stores/authStore.ts
interface AuthStore {
  user: User | null
  isLoggedIn: boolean
  login: (username: string, password: string) => Promise<boolean>
  register: (username: string, password: string) => Promise<boolean>
  logout: () => void
  checkAuth: () => void
}
```

### 4.4 路由保护

```typescript
// 未登录时跳转到登录页
// 已登录时跳转到主页
```

### 4.5 UI 设计规范（参考百度网盘）

**登录页面：**
- 居中卡片，白色背景，圆角阴影
- Logo + 应用名称
- 用户名/密码输入框
- 记住登录 复选框
- 登录按钮（渐变色，品牌主色）
- 注册链接

**顶部用户区域（参考图右上角）：**
- 用户头像（圆形）
- 用户名 + "Hi >" 风格的欢迎文字
- 点击展开下拉菜单

**侧边栏用户区域（参考图左下角）：**
- 底部显示账户信息
- 存储空间进度条（可选）
- 设置/工具入口

## 5. UI 原型 (UI Mockups)

### 5.1 登录页面布局

```
┌─────────────────────────────────────────────────┐
│                                                 │
│                                                 │
│           ┌─────────────────────┐               │
│           │      💰 Logo        │               │
│           │   AI 对账助手        │               │
│           │                     │               │
│           │  ┌───────────────┐  │               │
│           │  │ 用户名         │  │               │
│           │  └───────────────┘  │               │
│           │  ┌───────────────┐  │               │
│           │  │ 密码           │  │               │
│           │  └───────────────┘  │               │
│           │                     │               │
│           │  □ 记住登录         │               │
│           │                     │               │
│           │  ┌───────────────┐  │               │
│           │  │    登 录       │  │               │
│           │  └───────────────┘  │               │
│           │                     │               │
│           │  没有账号？立即注册  │               │
│           └─────────────────────┘               │
│                                                 │
└─────────────────────────────────────────────────┘
```

### 5.2 主页顶部用户区域（参考百度网盘）

```
┌──────────────────────────────────────────────────────────────┐
│  ☰  AI 对账助手                              🔔  👤 Hi >    │
└──────────────────────────────────────────────────────────────┘
                                                    ↓
                                          ┌────────────────┐
                                          │ 个人信息        │
                                          │ 账户设置        │
                                          │────────────────│
                                          │ 退出登录        │
                                          └────────────────┘
```

## 6. 验收标准 (Acceptance Criteria)

1. **登录功能**：输入正确的用户名密码后，成功跳转到主页
2. **注册功能**：新用户可以注册账号并自动登录
3. **持久化**：勾选"记住登录"后，重启应用保持登录状态
4. **路由保护**：未登录用户访问主页时，自动跳转到登录页
5. **用户展示**：登录后，顶部和侧边栏显示用户信息
6. **退出登录**：点击退出后，清除登录状态，跳转到登录页
7. **UI 风格**：整体风格与百度网盘参考图一致

## 7. 风险与依赖 (Risks & Dependencies)

| 风险 | 影响 | 缓解措施 |
|------|------|----------|
| 本地存储安全性 | 中 | 密码使用简单加密存储，后续接入真实后端 |
| 路由状态同步 | 低 | 使用 Zustand + React Router 配合处理 |

## 8. 预估工时 (Estimated Effort)

| 任务 | 预估时间 |
|------|----------|
| 创建认证状态管理 (authStore) | 30 分钟 |
| 登录页面 UI | 45 分钟 |
| 注册页面 UI | 30 分钟 |
| 路由保护逻辑 | 20 分钟 |
| 更新顶部用户区域 | 30 分钟 |
| 更新侧边栏用户区域 | 30 分钟 |
| 测试与调试 | 30 分钟 |
| **总计** | **约 3.5 小时** |

---

**审批状态**: ⏳ 待确认

**下一步**: 用户确认后，创建 `spec.md` 和 `tasks.md`，然后开始执行。
